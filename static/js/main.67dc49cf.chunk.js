(this["webpackJsonpcovid-19-monitor"]=this["webpackJsonpcovid-19-monitor"]||[]).push([[0],{157:function(e,t,a){e.exports={Counter:"CounterBlock_Counter__1eEwE"}},240:function(e,t,a){e.exports={Flag:"SidebarLeftList_Flag__2aEY_"}},281:function(e,t,a){e.exports=a(482)},293:function(e,t,a){},294:function(e,t,a){},473:function(e,t,a){},482:function(e,t,a){"use strict";a.r(t);for(var n=a(1),r=a.n(n),c=a(20),o=a.n(c),l=a(62),s=a(45),i=(a(290),a(246)),u=a(225),d=a(244),m=a(535),p=a(245),f=(a(293),a(29)),b=a(22),g=a(27),E=a(161),h=a(97),v={id:"clusters",type:"fill",beforeId:"admin-1-boundary-bg",source:"geojson",layout:{},paint:{"fill-opacity":.5,"fill-color":["get","color"]}},j=(a(294),function(e){var t=e.mapData,a=e.longitude,c=e.latitude,o=e.countrySelected,l=Object(n.useState)({latitude:46.2276,longitude:2.2137,zoom:4}),s=Object(f.a)(l,2),i=s[0],u=s[1],d=Object(n.useState)({hoveredFeature:null,x:0,y:0}),m=Object(f.a)(d,2),p=m[0],j=m[1],O=Object(n.useRef)(),y=Object(n.useCallback)((function(e){return u((function(t){return Object(g.a)({},t,{},e)}))}),[u]),w=Object(n.useCallback)((function(e){var t=e.longitude,a=e.latitude;y({longitude:t,latitude:a,zoom:4,transitionInterpolator:new h.a({speed:1.2}),transitionDuration:"auto"})}),[y]);Object(n.useEffect)((function(){a&&c&&w({longitude:a,latitude:c})}),[a,c,w]);var k=Object(n.useCallback)((function(e){var t=e.features,a=e.srcEvent,n=a.offsetX,r=a.offsetY,c=(t||[]).filter((function(e){return e.properties.state})),o=c.length>0?c[0]:Object(b.first)(t);j({hoveredFeature:o,x:n,y:r})}),[j]),C=Object(n.useCallback)((function(e){var t=e.features,a=(t||[]).filter((function(e){return e.properties.state})),n=a.length>0?a[0]:Object(b.first)(t);if(n){var r=n.properties;o(r)}}),[o]),x=Object(n.useCallback)((function(){var e=p.hoveredFeature,t=p.x,a=p.y;if(e){var n=r.a.createElement("div",null,r.a.createElement("b",null,"Country"),": ",e.properties.name);return e.properties.state&&(n=r.a.createElement("div",null,r.a.createElement("b",null,"State"),":"," ",e.properties.shortName||e.properties.county||e.properties.region||e.properties.state)),r.a.createElement(E.a,{className:"tooltip",style:{left:t,top:a}},n,r.a.createElement("div",null,r.a.createElement("b",null,"Cases:")," ",e.properties.lastCases),r.a.createElement("div",null,r.a.createElement("b",null,"Recovered:")," ",e.properties.lastRecovered),r.a.createElement("div",null,r.a.createElement("b",null,"Deaths:")," ",e.properties.lastDeaths),r.a.createElement("div",null,r.a.createElement("b",null,"Population affected:")," ",100*e.properties.casePercentPopulation," %"),r.a.createElement("div",null,r.a.createElement("b",null,"Growth factor:")," ",e.properties.lastGrowthFactor," %"),r.a.createElement("div",{className:"tooltip-click"},r.a.createElement("b",null,r.a.createElement("u",null,"Click to see more statistics"))))}return!1}),[p]);return r.a.createElement("div",{className:"Map"},r.a.createElement(h.d,Object.assign({},i,{width:"100%",height:"100%",mapStyle:"mapbox://styles/flash11/ck8gwpkts0njw1ip6l2jked9v",onViewportChange:y,mapboxApiAccessToken:"pk.eyJ1IjoiZmxhc2gxMSIsImEiOiJjazg1aHZkejIwNzRoM21wOG13ODByN3A5In0.LFqug4WplTRkwYOeKA9osQ",interactiveLayerIds:[v.id],onHover:k,onClick:C}),r.a.createElement(h.c,{type:"geojson",data:t,ref:O},r.a.createElement(h.b,v)),x()))}),O=a(522),y=a(483),w=a(523),k=a(524),C=a(542),x=a(98),S=a(525),N=a(526),P=a(239),B=a.n(P),F=a(25),I=function(e){var t=e.dates,a=Object(n.useState)([]),c=Object(f.a)(a,2),o=c[0],l=c[1],s=Object(n.useState)([]),i=Object(f.a)(s,2),u=i[0],d=i[1];return Object(n.useEffect)((function(){var e=JSON.parse(t);l(Object.keys(e).reduce((function(t,a){return t.push(Object(g.a)({date:a},e[a])),t}),[]))}),[t,l]),Object(n.useEffect)((function(){var e=o.map((function(e,t){if(0===t)return e;var a=(e.cases||0)-o[t-1].cases||0,n=(e.deaths||0)-o[t-1].deaths||0;return a<0&&(a=0),n<0&&(n=0),0===t?e:Object(g.a)({},e,{cases:a,deaths:n})}));d(e)}),[o,d]),r.a.createElement(r.a.Fragment,null,r.a.createElement(F.h,{width:"100%",height:"50%"},r.a.createElement(F.b,{data:o},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"colorConfirmed",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})),r.a.createElement("linearGradient",{id:"colorDeath",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#b10e03",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#b10e03",stopOpacity:0}))),r.a.createElement(F.e,{strokeDasharray:"3 3"}),r.a.createElement(F.j,{dataKey:"date"}),r.a.createElement(F.k,null),r.a.createElement(F.i,null),r.a.createElement(F.a,{type:"monotone",dataKey:"cases",stroke:"#8884d8",fillOpacity:1,fill:"url(#colorConfirmed)"}),r.a.createElement(F.a,{type:"monotone",dataKey:"deaths",stroke:"#b10e03",fillOpacity:1,fill:"url(#colorDeath)"}),r.a.createElement(F.f,{verticalAlign:"top",height:36}),r.a.createElement(F.g,{name:"Confirmed",type:"monotone",dataKey:"cases",stroke:"#8884d8"}),r.a.createElement(F.g,{name:"Dead",type:"monotone",dataKey:"deaths",stroke:"#b10e03"}))),r.a.createElement(F.h,{width:"100%",height:"50%"},r.a.createElement(F.d,{data:u},r.a.createElement(F.e,{strokeDasharray:"3 3"}),r.a.createElement(F.j,{dataKey:"date"}),r.a.createElement(F.k,null),r.a.createElement(F.i,null),r.a.createElement(F.f,{verticalAlign:"top",height:36}),r.a.createElement(F.c,{dataKey:"cases",stackId:"a",fill:"green"}),r.a.createElement(F.c,{dataKey:"deaths",stackId:"a",fill:"red"}))))},D=Object(O.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}}})),A=function(e){var t=e.selectedCountry,a=e.discardSelectedCountry,n=r.a.forwardRef((function(e,t){return r.a.createElement(y.a,Object.assign({direction:"up",ref:t},e))})),c=D(),o=r.a.createElement(r.a.Fragment,null);return t&&(o=r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{className:c.appBar},r.a.createElement(k.a,null,r.a.createElement(C.a,null,t.emoji),r.a.createElement(x.a,{variant:"h6",className:c.title},t.name," evolution chart"),r.a.createElement(S.a,{edge:"start",color:"inherit",onClick:a,"aria-label":"close"},r.a.createElement(B.a,null)))),r.a.createElement(I,{dates:t.dates}))),r.a.createElement(N.a,{fullScreen:!0,open:!!t,onClose:a,TransitionComponent:n},o)},G=a(531),M=a(157),L=a.n(M),R=function(e){var t=e.counter,a=e.text;return r.a.createElement("div",{className:L.a.Block},r.a.createElement(x.a,{variant:"h6"},a),r.a.createElement(x.a,{variant:"h5",className:L.a.Counter},t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")))},W=a(527),K=a(528),T=a(529),z=a(113),_=a(247),J=a(240),H=a.n(J),U=function(e){var t=e.index,a=e.data,n=e.style,c=a.filteredCountries,o=a.setCoordinates,l=c[t],s=l.state,i=l.lastCases,u=l.name,d=l.emoji,m=l.coordinates||[0,0],p=Object(f.a)(m,2),b=p[0],g=p[1];return r.a.createElement(W.a,{button:!0,key:t,style:n,onClick:function(){return o({longitude:b,latitude:g})}},r.a.createElement(K.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",wrap:"nowrap",spacing:2},r.a.createElement(K.a,{item:!0,container:!0,direction:"row",justify:"flex-start",spacing:2,alignItems:"center",wrap:"nowrap"},r.a.createElement(K.a,{item:!0},r.a.createElement(C.a,null,r.a.createElement("span",{className:H.a.Flag},d))),r.a.createElement(K.a,{item:!0},r.a.createElement(T.a,{primary:"".concat(u).concat(s?" - ".concat(s):"")}))),r.a.createElement(K.a,{item:!0},r.a.createElement(T.a,{secondary:"".concat(i)}))))},Y=r.a.memo((function(e){var t=e.filteredCountries,a=e.setCoordinates;return r.a.createElement(z.a,null,(function(e){var n=e.height,c=e.width;return r.a.createElement(_.a,{height:t.length<20?48*t.length:n,width:c,itemSize:48,itemCount:t.length,itemData:{filteredCountries:t,setCoordinates:a}},U)}))})),Z=a(536),q=a(530),Q=a(241),V=a.n(Q),X=r.a.memo((function(e){var t=e.search,a=e.setSearch;return r.a.createElement(Z.a,{label:"Search for a country...",variant:"outlined",value:t,onChange:function(e){return a(e.target.value)},InputProps:{startAdornment:r.a.createElement(q.a,{position:"start"},r.a.createElement(V.a,null))}})})),$=Object(O.a)((function(e){return{Header:{padding:"15px 0",textAlign:"center",flex:"0 1",backgroundColor:e.palette.background.default},List:{paddingTop:"8px",flexGrow:1,backgroundColor:e.palette.background.default},Block:{textAlign:"center",flex:"0 1 auto",backgroundColor:e.palette.background.default}}})),ee=function(e){var t=e.countries,a=e.setCoordinates,c=Object(n.useState)(""),o=Object(f.a)(c,2),l=o[0],s=o[1],i=Object(n.useState)([]),u=Object(f.a)(i,2),d=u[0],m=u[1],p=$();return Object(n.useEffect)((function(){m(t.filter((function(e){return e.name&&e.name.toLowerCase().includes(l.toLowerCase())})))}),[t,m,l]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:p.Block},r.a.createElement(R,{counter:Object(b.sumBy)(t,"lastCases"),text:"Total confirmed"}),r.a.createElement(G.a,null),r.a.createElement(R,{counter:Object(b.sumBy)(t,"lastDeaths"),text:"Total deaths"}),r.a.createElement(G.a,null)),r.a.createElement("div",{className:p.Header},r.a.createElement(X,{search:l,setSearch:s})),r.a.createElement("div",{className:p.List},r.a.createElement(Y,{filteredCountries:d,setCoordinates:a})))},te=a(250),ae=a(532),ne=Object(O.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),re=function(){var e=ne();return r.a.createElement(te.a,{className:e.backdrop,open:!0,onClick:function(){}},r.a.createElement(ae.a,{size:70}))},ce="[MapCases] Get map cases",oe="[MapCases] Get map cases success",le="[MapCases] Get map cases failure",se="[MapPolygons] Get map polygons",ie="[MapPolygons] Get map polygons success",ue="[MapPolygons] Get map polygons failure",de=function(e){return Object(b.values)(e.mapCases.countries)},me=function(e){return Object(b.keyBy)(de(e),"featureId")},pe=function(e){return Object(b.orderBy)(de(e),"lastCases",["desc"])},fe=function(e){return e.mapPolygons.polygons},be=a(541),ge=a(537),Ee=[],he=["#fcfdbf","#fde2a3","#fec488","#fea772","#fc8961","#f56b5c","#e75263","#d0416f","#b73779","#9c2e7f","#832681","#6a1c81","#51127c","#36106b","#1d1147","#0a0822"],ve=0;ve<he.length;ve++){var je=void 0;je=0===ve?0:ve/he.length,Ee.push(je)}Ee=Ee.sort();var Oe=ge.a().domain(Ee).range(he).interpolate(be.a);var ye=function(e,t,a){var n=Object(b.get)(Object(b.maxBy)(e,"casePercentPopulation"),"casePercentPopulation");return Object(g.a)({},a,{features:a.features.reduce((function(e,a){var r,c="rgba(0,0,0,0)",o=t[a.properties.id];return Object(b.get)(o,"population")&&o.lastCases>0&&(r=o.casePercentPopulation,c=Oe(r/n*3)),o&&e.push(Object(g.a)({},a,{properties:Object(g.a)({},a.properties,{},o,{color:c})})),e}),[])})},we=a(81),ke=a(533),Ce=a(540),xe=a(534),Se=a(242),Ne=a.n(Se),Pe=Object(O.a)((function(e){return{root:{display:"flex",height:"100%"},drawer:Object(we.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),appBar:Object(we.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)"),marginLeft:240}),menuButton:Object(we.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:240},content:{flexGrow:1,height:"100%"},title:{flexGrow:1}}})),Be=function(e){var t=e.leftSideBar,a=(e.rightSidebar,e.children),c=Pe(),o=Object(n.useState)(!1),l=Object(f.a)(o,2),s=l[0],i=l[1],u=function(){i(!s)};return r.a.createElement("div",{className:c.root},r.a.createElement(ke.a,null),r.a.createElement(w.a,{position:"fixed",className:c.appBar,color:"default"},r.a.createElement(k.a,null,r.a.createElement(S.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:u,className:c.menuButton},r.a.createElement(Ne.a,null)),r.a.createElement(x.a,{variant:"h6",className:c.title},"Covid 19 - World monitoring"))),r.a.createElement("nav",{className:c.drawer},r.a.createElement(Ce.a,{smUp:!0,implementation:"css"},r.a.createElement(xe.a,{anchor:"left",elevation:24,variant:"temporary",open:s,onClose:u,classes:{paper:c.drawerPaper},ModalProps:{keepMounted:!0},style:{display:"flex"}},t)),r.a.createElement(Ce.a,{xsDown:!0,implementation:"css"},r.a.createElement(xe.a,{anchor:"left",classes:{paper:c.drawerPaper},variant:"permanent",open:!0},t))),r.a.createElement("main",{className:c.content},r.a.createElement("div",{className:c.toolbar}),a))},Fe=function(){var e=Object(l.b)(),t=Object(n.useState)({longitude:2.2137,latitude:46.2276}),a=Object(f.a)(t,2),c=a[0],o=a[1],s=Object(n.useState)(null),i=Object(f.a)(s,2),u=i[0],d=i[1],m=Object(n.useState)({}),p=Object(f.a)(m,2),g=p[0],E=p[1],h=Object(l.c)(pe),v=Object(l.c)(fe),O=Object(l.c)(me),y=Object(l.c)((function(e){return e.mapCases.loading}));Object(n.useEffect)((function(){e({type:se})}),[e]),Object(n.useEffect)((function(){Object(b.isEmpty)(v)||e({type:ce,polygons:v})}),[e,v]),Object(n.useEffect)((function(){Object(b.isEmpty)(v)||E(ye(h,O,v))}),[h,O,v]);var w=r.a.createElement(ee,{countries:h.filter((function(e){return e.name&&!e.state})),setCoordinates:o}),k=Object(n.useCallback)((function(e){d(e)}),[d]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Be,{leftSideBar:w},Object(b.isEmpty)(g)?null:r.a.createElement(j,{mapData:g,longitude:c.longitude,latitude:c.latitude,countrySelected:k})),u?r.a.createElement(A,{selectedCountry:u,discardSelectedCountry:function(){return d(null)}}):null,y?r.a.createElement(re,null):null)};var Ie=function(){var e=Object(n.useMemo)((function(){return Object(d.a)({palette:{type:"dark"}})}),[]);return r.a.createElement(p.a,{basename:"/covid19-world-monitor"},r.a.createElement(m.a,{theme:e},r.a.createElement("div",{className:"App"},r.a.createElement(Fe,null))))},De=(a(473),{countries:[],error:null,loading:!1});var Ae=a(40),Ge=a.n(Ae),Me=a(41),Le=a(160),Re=Ge.a.mark(We);function We(){var e,t,a;return Ge.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch("https://coronadatascraper.com/timeseries-byLocation.json");case 3:return e=n.sent,n.next=6,e.json();case 6:return t=n.sent,n.next=9,Object.keys(t).reduce((function(e,a){var n=t[a],r=n.coordinates,c=n.dates,o=n.country,l=n.population,s=Object(b.get)(Le.countries[o],"name"),i=Object(b.get)(Le.countries[o],"emoji"),u=100,d=0,m=0,p=0,f=0;Object(b.sortBy)(Object(b.keys)(c),(function(e){return new Date(e)})).forEach((function(e){var t=c[e];Object(b.get)(t,"tested")&&(p=t.tested),Object(b.get)(t,"growthFactor")&&(u=t.growthFactor),Object(b.get)(t,"cases")&&(d=t.cases),Object(b.get)(t,"deaths")&&(m=t.deaths),Object(b.get)(t,"recovered")&&(f=t.recovered)})),u&&(u=+(100*u).toFixed(0));var E=(l?d/l:0).toFixed(4);return e[a]=Object(g.a)({},t[a],{name:s,emoji:i,lastCases:d,lastDeaths:m,lastTested:p,lastGrowthFactor:u,lastRecovered:f,casePercentPopulation:E,coordinates:r}),e}),{});case 9:return a=n.sent,n.next=12,Object(Me.b)({type:oe,countries:a});case 12:n.next=18;break;case 14:return n.prev=14,n.t0=n.catch(0),n.next=18,Object(Me.b)((r=n.t0.message,{type:le,error:r}));case 18:case"end":return n.stop()}var r}),Re,null,[[0,14]])}var Ke=Ge.a.mark(Te);function Te(){var e,t;return Ge.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,fetch("https://coronadatascraper.com/features.json");case 3:return e=a.sent,a.next=6,e.json();case 6:return t=a.sent,a.next=9,Object(Me.b)({type:ie,polygons:t});case 9:a.next=15;break;case 11:return a.prev=11,a.t0=a.catch(0),a.next=15,Object(Me.b)((n=a.t0.message,{type:ue,error:n}));case 15:case"end":return a.stop()}var n}),Ke,null,[[0,11]])}var ze=Ge.a.mark(Je),_e=Ge.a.mark(He);function Je(){return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Me.a)([Object(Me.c)(ce,We)]);case 2:case"end":return e.stop()}}),ze)}function He(){return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Me.a)([Object(Me.c)(se,Te)]);case 2:case"end":return e.stop()}}),_e)}var Ue=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ye(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Ze={polygons:[],error:null,loading:!1};var qe=Object(i.a)(),Qe=Object(s.applyMiddleware)(u.a,qe),Ve=Object(s.createStore)(Object(s.combineReducers)({mapCases:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:De,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce:return Object(g.a)({},e,{loading:!0,error:null});case oe:return Object(g.a)({},e,{loading:!1,error:null,countries:t.countries});case le:return Object(g.a)({},e,{loading:!1,error:t.error});default:return e}},mapPolygons:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case se:return Object(g.a)({},e,{loading:!0,error:null});case ie:return Object(g.a)({},e,{loading:!1,error:null,polygons:t.polygons});case ue:return Object(g.a)({},e,{loading:!1,error:t.error});default:return e}}}),Qe);qe.run(Je),qe.run(He),o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,{store:Ve},r.a.createElement(Ie,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/covid19-world-monitor",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/covid19-world-monitor","/service-worker.js");Ue?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ye(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Ye(t,e)}))}}()}},[[281,1,2]]]);
//# sourceMappingURL=main.67dc49cf.chunk.js.map