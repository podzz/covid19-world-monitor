(this["webpackJsonpcovid-19-monitor"]=this["webpackJsonpcovid-19-monitor"]||[]).push([[0],{148:function(e,t,a){e.exports={Counter:"CounterBlock_Counter__1eEwE"}},226:function(e,t,a){e.exports={Flag:"SidebarLeftList_Flag__2aEY_"}},269:function(e,t,a){e.exports=a(470)},281:function(e,t,a){},282:function(e,t,a){},461:function(e,t,a){},470:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(20),o=a.n(c),l=a(59),s=a(44),i=(a(278),a(232)),u=a(212),d=a(230),m=a(519),p=a(231),f=(a(281),a(29)),b=a(27),E=a(152),g=a(25),h=a(90),v={id:"clusters",type:"fill",source:"geojson",paint:{"fill-opacity":1,"fill-color":["interpolate",["linear"],["get","lastCases"],1e4,"rgba(0, 204, 0, 0.1)",4e4,"rgba(230, 0, 0, 0.6)"]}},j=(a(282),function(e){var t=e.mapData,a=e.longitude,c=e.latitude,o=e.countrySelected,l=Object(n.useState)({latitude:46.2276,longitude:2.2137,zoom:4}),s=Object(f.a)(l,2),i=s[0],u=s[1],d=Object(n.useState)({hoveredFeature:null,x:0,y:0}),m=Object(f.a)(d,2),p=m[0],j=m[1],O=Object(n.useRef)(),y=Object(n.useCallback)((function(e){return u((function(t){return Object(b.a)({},t,{},e)}))}),[u]),w=Object(n.useCallback)((function(e){var t=e.longitude,a=e.latitude;y({longitude:t,latitude:a,zoom:4,transitionInterpolator:new h.a({speed:1.2}),transitionDuration:"auto"})}),[y]);Object(n.useEffect)((function(){a&&c&&w({longitude:a,latitude:c})}),[a,c,w]);var C=Object(n.useCallback)((function(e){var t=e.features,a=e.srcEvent,n=a.offsetX,r=a.offsetY;j({hoveredFeature:Object(g.first)(t),x:n,y:r})}),[j]),k=Object(n.useCallback)((function(e){var t=e.features,a=Object(g.first)(t);if(a){var n=a.properties;o(n)}}),[o]),x=Object(n.useCallback)((function(){var e=p.hoveredFeature,t=p.x,a=p.y;return e&&r.a.createElement(E.a,{className:"tooltip",style:{left:t,top:a}},r.a.createElement("div",null,r.a.createElement("b",null,"Country"),": ",e.properties.name),r.a.createElement("div",null,r.a.createElement("b",null,"Cases:")," ",e.properties.lastCases),r.a.createElement("div",null,r.a.createElement("b",null,"Deaths:")," ",e.properties.lastDeaths),r.a.createElement("div",null,r.a.createElement("b",null,"Growth factor:")," ",e.properties.lastGrowthFactor," %"),r.a.createElement("div",{className:"tooltip-click"},r.a.createElement("b",null,r.a.createElement("u",null,"Click to see more statistics"))))}),[p]);return r.a.createElement("div",{className:"Map"},r.a.createElement(h.d,Object.assign({},i,{width:"100%",height:"100%",mapStyle:"mapbox://styles/mapbox/satellite-streets-v11",onViewportChange:y,mapboxApiAccessToken:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_MapboxAccessToken,interactiveLayerIds:[v.id],onHover:C,onClick:k}),r.a.createElement(h.c,{type:"geojson",data:t,ref:O},r.a.createElement(h.b,v)),x()))}),O=a(506),y=a(471),w=a(507),C=a(508),k=a(522),x=a(91),S=a(509),N=a(510),B=a(225),D=a.n(B),A=a(24),_=function(e){var t=e.dates,a=Object(n.useState)([]),c=Object(f.a)(a,2),o=c[0],l=c[1],s=Object(n.useState)([]),i=Object(f.a)(s,2),u=i[0],d=i[1];return Object(n.useEffect)((function(){var e=JSON.parse(t);l(Object.keys(e).reduce((function(t,a){return t.push(Object(b.a)({date:a},e[a])),t}),[]))}),[t,l]),Object(n.useEffect)((function(){var e=o.map((function(e,t){if(0===t)return e;var a=(e.cases||0)-o[t-1].cases||0,n=(e.deaths||0)-o[t-1].deaths||0;return a<0&&(a=0),n<0&&(n=0),0===t?e:Object(b.a)({},e,{cases:a,deaths:n})}));d(e)}),[o,d]),r.a.createElement(r.a.Fragment,null,r.a.createElement(A.h,{width:"100%",height:"50%"},r.a.createElement(A.b,{data:o},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"colorConfirmed",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#8884d8",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#8884d8",stopOpacity:0})),r.a.createElement("linearGradient",{id:"colorDeath",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"5%",stopColor:"#b10e03",stopOpacity:.8}),r.a.createElement("stop",{offset:"95%",stopColor:"#b10e03",stopOpacity:0}))),r.a.createElement(A.e,{strokeDasharray:"3 3"}),r.a.createElement(A.j,{dataKey:"date"}),r.a.createElement(A.k,null),r.a.createElement(A.i,null),r.a.createElement(A.a,{type:"monotone",dataKey:"cases",stroke:"#8884d8",fillOpacity:1,fill:"url(#colorConfirmed)"}),r.a.createElement(A.a,{type:"monotone",dataKey:"deaths",stroke:"#b10e03",fillOpacity:1,fill:"url(#colorDeath)"}),r.a.createElement(A.f,{verticalAlign:"top",height:36}),r.a.createElement(A.g,{name:"Confirmed",type:"monotone",dataKey:"cases",stroke:"#8884d8"}),r.a.createElement(A.g,{name:"Dead",type:"monotone",dataKey:"deaths",stroke:"#b10e03"}))),r.a.createElement(A.h,{width:"100%",height:"50%"},r.a.createElement(A.d,{data:u},r.a.createElement(A.e,{strokeDasharray:"3 3"}),r.a.createElement(A.j,{dataKey:"date"}),r.a.createElement(A.k,null),r.a.createElement(A.i,null),r.a.createElement(A.f,{verticalAlign:"top",height:36}),r.a.createElement(A.c,{dataKey:"cases",stackId:"a",fill:"green"}),r.a.createElement(A.c,{dataKey:"deaths",stackId:"a",fill:"red"}))))},P=Object(O.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}}})),T=function(e){var t=e.selectedCountry,a=e.discardSelectedCountry,n=r.a.forwardRef((function(e,t){return r.a.createElement(y.a,Object.assign({direction:"up",ref:t},e))})),c=P(),o=r.a.createElement(r.a.Fragment,null);return t&&(o=r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{className:c.appBar},r.a.createElement(C.a,null,r.a.createElement(k.a,null,t.emoji),r.a.createElement(x.a,{variant:"h6",className:c.title},t.name," evolution chart"),r.a.createElement(S.a,{edge:"start",color:"inherit",onClick:a,"aria-label":"close"},r.a.createElement(D.a,null)))),r.a.createElement(_,{dates:t.dates}))),r.a.createElement(N.a,{fullScreen:!0,open:!!t,onClose:a,TransitionComponent:n},o)},F=a(515),G=a(511),L=a(512),M=a(513),I=a(106),W=a(233),K=a(226),R=a.n(K),U=function(e){var t=e.index,a=e.data,n=e.style,c=a.filteredCountries,o=a.setCoordinates,l=c[t],s=l.state,i=l.lastCases,u=l.name,d=l.emoji,m=l.coordinates||[0,0],p=Object(f.a)(m,2),b=p[0],E=p[1];return r.a.createElement(G.a,{button:!0,key:t,style:n,onClick:function(){return o({longitude:b,latitude:E})}},r.a.createElement(L.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center",wrap:"nowrap",spacing:2},r.a.createElement(L.a,{item:!0,container:!0,direction:"row",justify:"flex-start",spacing:2,alignItems:"center",wrap:"nowrap"},r.a.createElement(L.a,{item:!0},r.a.createElement(k.a,null,r.a.createElement("span",{className:R.a.Flag},d))),r.a.createElement(L.a,{item:!0},r.a.createElement(M.a,{primary:"".concat(u).concat(s?" - ".concat(s):"")}))),r.a.createElement(L.a,{item:!0},r.a.createElement(M.a,{secondary:"".concat(i)}))))},z=r.a.memo((function(e){var t=e.filteredCountries,a=e.setCoordinates;return r.a.createElement(I.a,null,(function(e){var n=e.height,c=e.width;return r.a.createElement(W.a,{height:t.length<20?48*t.length:n,width:c,itemSize:48,itemCount:t.length,itemData:{filteredCountries:t,setCoordinates:a}},U)}))})),H=a(520),J=a(514),V=a(227),Y=a.n(V),X=r.a.memo((function(e){var t=e.search,a=e.setSearch;return r.a.createElement(H.a,{label:"Search for a country...",variant:"outlined",value:t,onChange:function(e){return a(e.target.value)},InputProps:{startAdornment:r.a.createElement(J.a,{position:"start"},r.a.createElement(Y.a,null))}})})),$=a(148),q=a.n($),Q=function(e){var t=e.counter,a=e.text;return r.a.createElement("div",{className:q.a.Block},r.a.createElement(x.a,{variant:"h6"},a),r.a.createElement(x.a,{variant:"h5",className:q.a.Counter},t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")))},Z=Object(O.a)((function(e){return{Header:{padding:"15px 0",textAlign:"center",flex:"0 1",backgroundColor:e.palette.background.default},List:{paddingTop:"8px",flexGrow:1,backgroundColor:e.palette.background.default},Block:{textAlign:"center",flex:"0 1 auto",backgroundColor:e.palette.background.default}}})),ee=function(e){var t=e.countries,a=e.setCoordinates,c=Object(n.useState)(""),o=Object(f.a)(c,2),l=o[0],s=o[1],i=Object(n.useState)([]),u=Object(f.a)(i,2),d=u[0],m=u[1],p=Z();return Object(n.useEffect)((function(){m(t.filter((function(e){return e.name.toLowerCase().includes(l.toLowerCase())})))}),[t,m,l]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:p.Block},r.a.createElement(Q,{counter:Object(g.sumBy)(t,"lastCases"),text:"Total confirmed"}),r.a.createElement(F.a,null),r.a.createElement(Q,{counter:Object(g.sumBy)(t,"lastDeaths"),text:"Total deaths"}),r.a.createElement(F.a,null)),r.a.createElement("div",{className:p.Header},r.a.createElement(X,{search:l,setSearch:s})),r.a.createElement("div",{className:p.List},r.a.createElement(z,{filteredCountries:d,setCoordinates:a})))},te=a(236),ae=a(516),ne=Object(O.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),re=function(){var e=ne();return r.a.createElement(te.a,{className:e.backdrop,open:!0,onClick:function(){}},r.a.createElement(ae.a,{size:70}))},ce="[MapPolygons] Get map polygons",oe="[MapPolygons] Get map polygons success",le="[MapPolygons] Get map polygons failure",se=function(e){return Object(g.values)(e.mapCases.countries)},ie=function(e){return Object(g.keyBy)(se(e),"featureId")},ue=function(e){return Object(g.orderBy)(se(e),"lastCases",["desc"])},de=a(77),me=a(517),pe=a(521),fe=a(518),be=a(228),Ee=a.n(be),ge=Object(O.a)((function(e){return{root:{display:"flex",height:"100%"},drawer:Object(de.a)({},e.breakpoints.up("sm"),{width:240,flexShrink:0}),appBar:Object(de.a)({},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(240,"px)"),marginLeft:240}),menuButton:Object(de.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:240},content:{flexGrow:1,height:"100%"},title:{flexGrow:1}}})),he=function(e){var t=e.leftSideBar,a=(e.rightSidebar,e.children),c=ge(),o=Object(n.useState)(!1),l=Object(f.a)(o,2),s=l[0],i=l[1],u=function(){i(!s)};return r.a.createElement("div",{className:c.root},r.a.createElement(me.a,null),r.a.createElement(w.a,{position:"fixed",className:c.appBar,color:"default"},r.a.createElement(C.a,null,r.a.createElement(S.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:u,className:c.menuButton},r.a.createElement(Ee.a,null)),r.a.createElement(x.a,{variant:"h6",className:c.title},"Covid 19 - World monitoring"))),r.a.createElement("nav",{className:c.drawer},r.a.createElement(pe.a,{smUp:!0,implementation:"css"},r.a.createElement(fe.a,{anchor:"left",elevation:24,variant:"temporary",open:s,onClose:u,classes:{paper:c.drawerPaper},ModalProps:{keepMounted:!0},style:{display:"flex"}},t)),r.a.createElement(pe.a,{xsDown:!0,implementation:"css"},r.a.createElement(fe.a,{anchor:"left",classes:{paper:c.drawerPaper},variant:"permanent",open:!0},t))),r.a.createElement("main",{className:c.content},r.a.createElement("div",{className:c.toolbar}),a))},ve=function(e){return e.mapPolygons.polygons},je="[MapCases] Get map cases",Oe="[MapCases] Get map cases success",ye="[MapCases] Get map cases failure",we=function(){var e=Object(l.b)(),t=Object(n.useState)({longitude:2.2137,latitude:46.2276}),a=Object(f.a)(t,2),c=a[0],o=a[1],s=Object(n.useState)(null),i=Object(f.a)(s,2),u=i[0],d=i[1],m=Object(n.useState)({}),p=Object(f.a)(m,2),E=p[0],h=p[1],v=Object(l.c)(ue),O=Object(l.c)(ve),y=Object(l.c)(ie),w=Object(l.c)((function(e){return e.mapCases.loading}));Object(n.useEffect)((function(){e({type:ce})}),[e]),Object(n.useEffect)((function(){Object(g.isEmpty)(O)||e({type:je,polygons:O})}),[e,O]),Object(n.useEffect)((function(){Object(g.isEmpty)(O)||h(function(e,t){return Object(b.a)({},t,{features:t.features.reduce((function(t,a){var n=e[a.properties.id];return!Object(g.get)(a.properties,"type_en")&&n&&t.push(Object(b.a)({},a,{properties:Object(b.a)({},a.properties,{},n)})),t}),[])})}(y,O))}),[y,O]);var C=r.a.createElement(ee,{countries:v,setCoordinates:o}),k=Object(n.useCallback)((function(e){d(e)}),[d]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(he,{leftSideBar:C},Object(g.isEmpty)(E)?null:r.a.createElement(j,{mapData:E,longitude:c.longitude,latitude:c.latitude,countrySelected:k})),u?r.a.createElement(T,{selectedCountry:u,discardSelectedCountry:function(){return d(null)}}):null,w?r.a.createElement(re,null):null)};var Ce=function(){var e=Object(n.useMemo)((function(){return Object(d.a)({palette:{type:"dark"}})}),[]);return r.a.createElement(p.a,{basename:""},r.a.createElement(m.a,{theme:e},r.a.createElement("div",{className:"App"},r.a.createElement(we,null))))},ke=(a(461),{countries:[],error:null,loading:!1});var xe=a(40),Se=a.n(xe),Ne=a(41),Be=a(151),De=Se.a.mark(Ae);function Ae(){var e,t,a;return Se.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch("https://coronadatascraper.com/timeseries-byLocation.json");case 3:return e=n.sent,n.next=6,e.json();case 6:return t=n.sent,n.next=9,Object.keys(t).reduce((function(e,a){var n=t[a],r=n.coordinates,c=n.dates,o=n.country;if(!a.includes(",")&&Be.countries[o]){var l=Be.countries[o],s=l.name,i=l.emoji,u=c[Object(g.last)(Object(g.sortBy)(Object(g.keys)(c),(function(e){return new Date(e)})))],d=u.cases,m=u.deaths,p=u.tested,f=u.growthFactor;"USA"===a&&(r=[-101.924137,41.4831411]),f&&(f=(100*f).toFixed(0)),e[a]=Object(b.a)({},t[a],{name:s,emoji:i,lastCases:d||0,lastDeaths:m||0,lastTested:p||0,lastGrowthFactor:f||100,coordinates:r})}return e}),{});case 9:return a=n.sent,n.next=12,Object(Ne.b)({type:Oe,countries:a});case 12:n.next=18;break;case 14:return n.prev=14,n.t0=n.catch(0),n.next=18,Object(Ne.b)((r=n.t0.message,{type:ye,error:r}));case 18:case"end":return n.stop()}var r}),De,null,[[0,14]])}var _e=Se.a.mark(Pe);function Pe(){var e,t;return Se.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,fetch("https://coronadatascraper.com/features.json");case 3:return e=a.sent,a.next=6,e.json();case 6:return t=a.sent,a.next=9,Object(Ne.b)({type:oe,polygons:t});case 9:a.next=15;break;case 11:return a.prev=11,a.t0=a.catch(0),a.next=15,Object(Ne.b)((n=a.t0.message,{type:le,error:n}));case 15:case"end":return a.stop()}var n}),_e,null,[[0,11]])}var Te=Se.a.mark(Ge),Fe=Se.a.mark(Le);function Ge(){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ne.a)([Object(Ne.c)(je,Ae)]);case 2:case"end":return e.stop()}}),Te)}function Le(){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ne.a)([Object(Ne.c)(ce,Pe)]);case 2:case"end":return e.stop()}}),Fe)}var Me=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ie(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var We={polygons:[],error:null,loading:!1};var Ke=Object(i.a)(),Re=Object(s.applyMiddleware)(u.a,Ke),Ue=Object(s.createStore)(Object(s.combineReducers)({mapCases:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case je:return Object(b.a)({},e,{loading:!0,error:null});case Oe:return Object(b.a)({},e,{loading:!1,error:null,countries:t.countries});case ye:return Object(b.a)({},e,{loading:!1,error:t.error});default:return e}},mapPolygons:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce:return Object(b.a)({},e,{loading:!0,error:null});case oe:return Object(b.a)({},e,{loading:!1,error:null,polygons:t.polygons});case le:return Object(b.a)({},e,{loading:!1,error:t.error});default:return e}}}),Re);Ke.run(Ge),Ke.run(Le),o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,{store:Ue},r.a.createElement(Ce,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Me?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ie(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Ie(t,e)}))}}()}},[[269,1,2]]]);
//# sourceMappingURL=main.6412bead.chunk.js.map